<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Curso NodeJS - AngularJS - Backbone</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/serif.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

        <link rel="stylesheet" href="css/main.css">
		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Introducción a NodeJS, AngularJS y BackboneJS</h1>
					
					<p>
						<small>Creado por <a href="http://twitter.com/rrequero">@rrequero</a></small>
					</p>
				</section>

				<section>
					<h2>Indice</h2>
					<ul>
						<li>¿Que vamos ha hacer?</li>
                        <li>¿Que necesitamos?</li>
						<li>Características de las tecnologías</li>
						<li>Demo</li>
                        <li>NodeJS</li>
                        <li>Angularjs</li>
                        <li>Backbone.js</li>
					</ul>

					
				</section>

				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h2>¿Que vamos ha hacer?</h2>
						<p>
							<ul>
								<li>Aplicación web de gestión de usuarios (CRUD)</li>
								<li>Backend con NodeJS y MongoDB</li>
								<li>Frontal con AngularJS</li>
								<li>Frontal con BackboneJS</li>
							</ul>
						</p>						
					</section>
					<section>
						<h2>¿Que necesitamos?</h2>
						<ul>
							<li>NodeJs:  <a href="http://nodejs.org/">http://nodejs.org/</a></li>
							<li>MongoDB: <a href="https://www.mongodb.org/downloads">https://www.mongodb.org/downloads</a></li>
							<li>AngularJS y BackboneJS</li>
							<li>GIT <a href="http://git-scm.com/">http://git-scm.com/</a></li>
							<li>Editor de texto: Notepad++, Sublime Text, Eclipse, IntelliJ, ...</li>
						</ul>
					</section>
					
				</section>

				<section data-state="nodejs">
					<h2>NodeJS</h2>
					<p><img id="logo" class="contrast" src="/img/logoNodeJS.svg" alt="node.js"></p>
					<ul>
						<li>Programa de servidor</li>
						<li>Motor V8 JavaScript escrito por Google</li>
						<li>Programación orientada a eventos</li>
						<li>Facilmente escalable</li>
						<li>NPM</li>
						<li>OpenSource</li>
					</ul>
					<aside class="notes">
						NPM: Gestor de paquetes. Su esquema para instalación es un fichero en formato JSON</br>
						Para que vamos a utilizar nosotros node? VAmos a definir una api rest de forma facil y rápida.
					</aside>
				</section>
				
				<section data-state="express">
					<h2>Express</h2>
					<p>
						<a href="http://expressjs.com/">http://expressjs.com/</a>						
					</p>

					<ul>
						<li>Framework de desarrollo de aplicaciones web</li>
						<li>Router</li>
						<li>Session handler</li>
						<li>Gestor de plantillas (Jade, EJS, etc)</li>
						<li>Etc...</li>
						<li>OpenSource</li>
					</ul>
					<aside class="notes">
						Con esta librerias vamos a desarrollar una api REST de una forma rápida y sencilla
					</aside>
				</section>
				<section data-state="mongodb">
					<h2>MongoDB</h2>
					<p><img class="contrast" src="/img/logo-mongodb.png" alt="mongodb"></p>
					<ul>
						<li>NoSQL</li>
						<li>Orientado a documentos</li>						
						<li>Estructuras de datos en BSON</li>	
						<li>OpenSource</li>					
					</ul>
					<aside class="notes">
						Orientado a documentos: Un documento es como un registro en una tabla convencional pero no es rigido. Un documento puede ser diferente a otro en una coleccion.</br>
						BSON: JSON Binario. Un objeto BSON consiste en una lista ordenada de elementos. Cada elemento consta de un campo nombre, un tipo y un valor. </br>
						Más eficiente que JSON, a veces puede usas más espacio porque guardar informacion (por ejemplo tamaño de los datos para cuando son grandes saber hasta donde escanear) pero que la lectura sea más rapida
					</aside>
				</section>
				<section data-state="mongoose">
					<h2>Mongoose</h2>
					<p>
						<a href="https://github.com/learnboost/mongoose">https://github.com/learnboost/mongoose/</a>
					</p>

					<ul>
						<li>ODM</li>
						<li>OpenSource</li>	
					</ul>
					<aside class="notes">
						ODM: Object Data Mapping es como el ORM para mongo (Object Relational Mapping)
						Este le vamos a utilizar para obtener, guardar, etc nuestros usuarios.
					</aside>
				</section>

                <section data-state="angularjs">
                    <h2>Angularjs</h2>
                    <p>
                        <a href="https://angularjs.org/">https://angularjs.org</a>
                        <p><img src="/img/angularjsLogo.png" alt="angularjs"></p>
                    </p>

                    <ul>
                        <li>Creado por Google</li>
                        <li>MVC</li>
                        <li>Data binding</li>
                        <li>Inyección de dependencias</li>
                        <li>Documentación</li>
                        <li>No tiene dependencias</li>
                        <li>OpenSource</li>
                    </ul>
                    <aside class="notes">
                        Caracteristicas principales: Separar el html del codigo javascript, no manipular el dom desde el javascript,
                        inyeccion de dependencias, etc.
                        Podria utilizar Jquery pero si no esta presente utiliza una version reducida llamada jqlite
                    </aside>
                </section>
                <section data-state="backbone">
                    <h2>Backbone.js</h2>
                    <p>
                        <a href="http://backbonejs.org/">http://backbonejs.org</a>
                        <p><img src="/img/backbone.png" alt="backbonejs"></p>
                    </p>

                    <ul>
                        <li>Creado por Jeremy Ashkenas (creador de CoffeScript)</li>
                        <li>MVC</li>
                        <li>Dependencias:JQuery, underscore</li>
                        <li></li>
                        <li>OpenSource</li>
                    </ul>
                    <aside class="notes">
                        Caracteristicas principales: Separar el html del codigo javascript, no manipular el dom desde el javascript,
                        inyeccion de dependencias, etc
                    </aside>
                </section>
                <section data-state="use">
                    <h2>Actualmente</h2>
                    <p>Comparación de crecimiento</p>
                    <img src="img/comparacionCrecimiento.png"/>
                    <aside class="notes">
                        Caracteristicas principales: Separar el html del codigo javascript, no manipular el dom desde el javascript,
                        inyeccion de dependencias, etc
                    </aside>
                </section>
                <section data-state="use">
                    <h2>Actualmente</h2>
                    <p>Comparación de uso</p>
                    <img src="img/comparacionBusquedas.PNG"/>
                    <aside class="notes">

                    </aside>
                </section>

                <section>
                    <h1>Demo</h1>
                    <h3>Angularjs: <a href="http://angular.curso.local/#/">demo</a></h3>
                    <h3>Backbone: <a href="http://backbone.curso.local/#/">demo</a></h3>
                    <aside class="notes">
                        Explicar que vamos ha hacer en la aplicacion de demo mostrando el funcionamiento
                    </aside>
                </section>
                <section>
                    <h1>Preparación</h1>
                    <ul>
                        <li>Arrancar mongodb</li>
                        <li>Descargar código de la demo en github</li>
                        <li>Ejecutar script de creación de inicialización de la bbdd</li>

                    </ul>
                    <aside class="notes">

                    </aside>
                </section>
                <section >
                    <h1>MongoDb</h1>
                    <h3>Código del backend de la aplicación de demo</h3>
                    <aside class="notes">

                    </aside>
                </section>

                <section>
                    <h2>Conexión a mongodb</h2>
                    <pre><code data-trim >
                        mongoose.connect('mongodb://127.0.0.1:27017/crudUsers', onDbReady);
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>

				<section>
					<h2>Modelo de User </h2>
					<pre><code data-trim >
/**
Definimos el modelo
**/
var Schema = mongoose.Schema;

var User = new Schema({
    username:	{ type: String, required: true, index : { unique : true}, trim: true },
    email:		{ type: String, required: true, trim: true },
    password:	{ type: String, required: true },
    name:		{ type: String, required: true, trim: true },
    surname:	{ type: String, required: false, trim: true },
    createdAt:	{ type: Date, default: Date.now },
    gravatar: 	{type: String, required:false}
});
mongoose.model('User', User);
					</code></pre>
                    <aside class="notes">
                        Con este código definimos el model o de user. Es como el modelo en hibernate.

                    </aside>
				</section>
                <section>
                    <h2>Router de express</h2>
					<pre><code data-trim >
var router = express.Router();
                    </code></pre>
                    <aside class="notes">
                        Con esto definimos las urls a las que va a responder nuestro servidor y que acciones
                        va a ejecutar en cada una.
                        VAmos a crear una api REST.

                    </aside>
                </section>
                <section>
                    <h2>Router de express</h2>
                    <h3>List de usuarios (GET)</h3>
					<pre><code data-trim >
router.get('/users', function(req, res) {
    mongoose.model('User').find({},
    function (err, list) {
        if(err){
            console.log("Error "+err);
        }else{
            res.json(list);
        }
    });
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h2>Router de express</h2>
                    <h3>Obtención de usuario por username (GET)</h3>
					<pre><code data-trim >
router.get('/users/:username', function(req, res) {
    mongoose.model('User').findOne({username:req.params.username},
        function (err, list) {
            if(err){
                console.log("Error "+err);
            }else{
                res.json(list);
            }
        });
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h2>Router de express</h2>
                    <h3>Creación de usuario (POST)</h3>

					<pre><code data-trim >
router.post('/users', function(req, res) {
    //comprobamos si existe un usuario con el mismo username
    mongoose.model('User').findOne({username:req.body.username}, function(err, user){
        if(err){
            res.status(510);
            res.send("Error delete user");
        }else{
            if(user){
                res.status(510);
                res.send("Duplicated user");
            }else{
                //creamos el usuariovar userModel = mongoose.model('User');
                var userModel = mongoose.model('User');

                var user = {
                    name:req.body.name,
                    username: req.body.username,
                    email: req.body.email,
                    password: req.body.password,
                    surname: req.body.surname,
                    gravatar:req.body.gravatar
                };
                var userInstance = new userModel(user);
                userInstance.save(function (err, user){
                    if(err){
                        res.status(510);
                        res.send("Error create user " + err);
                    }else{
                        res.json(user);
                    }
                });
            }
        }
    });
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h2>Router de express</h2>
                    <h3>Actualización de usuario por id (PUT)</h3>
					<pre><code data-trim >
router.put('/users/:id', function(req, res) {
    //comprobamos si existe un usuario con el mismo username
    mongoose.model('User').findOne({_id:ObjectId(req.params.id) }, function(err, user){
    if(err){
        res.status(510);
        res.send("Error delete user");
    }else{
        if(!user){
            res.status(510);
            res.send("User not exist");
        }else{
            user.name=req.body.name;
            user.email= req.body.email;
            user.password= req.body.password;
            user.surname= req.body.surname;
            user.gravatar=req.body.gravatar;

            //var userInstance = new userModel(user);
            user.save(function (err, user){
                if(err){
                    res.status(510);
                    res.send("Error update user " + err);
                }else{
                    res.send("");
                }
            });
        }

    }

    });
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h2>Router de express</h2>
                    <h3>Borrado de usuario por id (DELETE)</h3>
					<pre><code data-trim >
router.delete('/users/:id', function(req, res) {
    mongoose.model('User').remove({_id:ObjectId(req.params.id)},function(err){
        if(err){
            res.status(510);
            res.send("Error delete user");
        }else{
            res.send("");
        }
    });
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h2>Levantar el servidor</h2>
                    <pre><code data-trim >
var server = app.listen(app.get('port'), function() {
    console.log('Express server listening on port ' + server.address().port);
});
                    </code></pre>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>Conceptos básicos</h3>
                    <ul>
                        <li>Scopes</li>                        
                        <li>Modules</li>
						<li>Controllers</li>
                        <li>Filters</li>
                        <li>Directive</li>
                        <li>Services</li>
                    </ul>
                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>Scopes</h3>
                    <p>Los <strong>scopes</strong> son los distintos contextos de ejecución</p>
                    <p>Guardan la información</p>
                    <aside class="notes">
                        cuando referenciamos un atributo del modelo mediante la directive ng-model, no estamos sino apuntando a un atributo que contiene el scope sobre el que se está trabajando.
                        <br>En los scopes se guarda la información de los modelos que se representan en la vista y también atributos que se utilizan para manejar la lógica de la misma.
                    </aside>
                </section>
				 <section>
                    <h1>AngularJS</h1>
                    <h3>Modules</h3>
                    <p>Namespace: Organizan el código</p>
                    <p>Declaración de dependencias</p>

                    <aside class="notes">
                        El modulo nos permite declarar dependencias y su nombre. Sirve para no declarar en el espacio de nombres global y <br>
                        poder reutilizar
                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>Controllers</h3>
                    <p>Son los elementos principales de angularJS</p>
                    <p>Manejan toda la información del scope</p>

                    <aside class="notes">
                        Los controllers son los encargados de inicializar y modificar la información que contienen los scopes en función de las necesidades de la aplicación.
                        <br>
                        Hablar aqui de Client-side template  y el data-binding
                    </aside>
                </section>
               
                <section>
                    <h1>AngularJS</h1>
                    <h3>Filters</h3>
                    <p>Modificadores</p>

                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>Directives</h3>
                    <p>Atributos, Elementos, Comentarios o Clases CSS</p>
                    <p>Asocia una funcionalidad a la directiva</p>
                    <p>Demo</p>
                    <aside class="notes">
                        Mediante el uso de las mismas podemos extender la sintaxis de HTML y darle el comportamiento que deseemos
                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>Services</h3>
                    <p>Tres grupos: Services, Factories y Providers</p>
                    <p>Organización y reutilización de código</p>

                    <aside class="notes">
                        <ul>
                            <li>service: Cuando se inyecta se devuelve una instancia de la función<br>
                            En un service no se pueden inyectar otros elementos</li>
                            <li>factory: Cuando se inyecta se devuelve el valor resultado de la ejecución de la función</li>
                            <li>provider: Cuando se inyecta se devuelve la funcion pasada en el $get</li>

                        </ul>
                        <p>Los providers tienen una ventaja que es que se pueden configurar durante la etapa de config de angular
                        (tienes acceso a las funciones que no estan dentro del $get</p>
                    </aside>
                </section>
                <section>
                    <h1>AngularJS</h1>
                    <h3>CRUD de usuarios</h3>

                    <aside class="notes">
                        Descargar el codigo de la demo
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Conceptos básicos</h3>
                    <ul>
                        <li>Events</li>
                        <li>Models</li>
                        <li>Collections</li>
                        <li>Route</li>
                    </ul>
                    <aside class="notes">
                        Ejemplo de tutorial http://alfonsomarin.com/desarrollo-web/tutoriales/backbonejs-ii-modelos
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Events</h3>
                    <p>Acontecimientos internos que ocurren en la aplicación</p>
                    <p>Se pueden recoger en cualquier parte de la aplicación</p>
                    <p>Ejemplo: Se modifico un modelo, se elimino un modelo de la colección,etc</p>
                    <aside class="notes">
                        Ejemplo de tutorial
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Models</h3>
                    <p>Son contenedores de datos</p>
                    <p>Tienen metodos para tratar los datos (CRUD) </p>
                    <p>Lanza eventos cada vez que ocurre algo en el modelo (</p>

                    <aside class="notes">
                        Los Modelos como en cualquier arquitectura MVC se encargan de controlar los datos de
                        <br>la vista que esta viendo el usuario en ese momento, manejan lógica de negocio a nivel de manipulación de datos
                        <br>y también se usan generalmente para capturar los eventos que se generan y para producirlos.
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Collections</h3>
                    <p>Conjunto de modelos</p>
                    <p>Tienen metodos para tratar los datos (CRUD), ordenar y buscar  </p>
                    <p>Generan eventos cada vez que se agrega o elimina un modelo y tambien genera los eventos de los modelos</p>

                    <aside class="notes">
                        Cuando un modelo lanza un evento por ejemplo de change:attribute la collecion asociada a el tambien
                        lanza ese evento y se podria capturaar
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Views</h3>
                    <p>Controladores</p>
                    <p>Orquestan todo lo que pasa en una "pantalla" </p>
                    <p>Manejan el diseño de la interfaz HTML (renderizado normalmente con underscore)</p>

                    <aside class="notes">
                        Son las que manejan el diseño de la interfaz HTML y se enlazan a los modelos para mostrar sus datos,<br>
                        las vistas permiten realizar una abstracción de los datos para que puedan ser manipulados por el usuario <br>
                        y también crear plantillas para ser reutilizadas en diferentes paginas.
                    </aside>
                </section>
                <section>
                    <h1>Backbone</h1>
                    <h3>Route</h3>
                    <p>Encargados de redirigir a cada una de las vistas</p>


                    <aside class="notes">

                    </aside>
                </section>
                <section>
                    <h1>BackboneJS</h1>
                    <h3>CRUD de usuarios</h3>

                    <aside class="notes">
                        Descargar el codigo de la demo
                    </aside>
                </section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: 'serif', // available themes are in /css/theme
				transition: 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
